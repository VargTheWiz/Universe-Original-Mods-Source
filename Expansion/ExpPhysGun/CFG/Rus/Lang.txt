Items ^{
    Weapon ^{
        CustomWeapon ^{
            PhysGun ~{
                BaseGun=Missile_Launcher
                MinDamage=1
                MaxDamage=1
                DamageSet=Splinter,Undefendable,NoDelta
                ShotType=Rocket
                Speed=5000
                AverageRadius=100
                SecondaryDamageRadius=0
                MissileRadius=1500
                MissileMinSpeed=5000
                MissileMaxSpeed=5000
                MissileChanceToBeHit=0
                mWeaponDamage=1.00,1.15,1.30,1.45,1.60,1.75,1.90,2.05
                ShotsPerTurn=1
                ArcadeType=Flow_Blaster
                MiningFactor=1.5
                kCost=100.0
                AverageSize=100
                TechLevel=8
                InventTechLevel=Turbogravitron
                StoreAvailability=NotSold
                ShotEffectPath=Weapon.4
                ShotEffectPalette=0
                SplashEffectPath=Weapon.NoGraph
                MissileExplosionEffectPath=Weapon.MissileHit
            }
        }
        Missile ^{
            Missile_Asteroid_blue ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Asteroid_green ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Asteroid_red ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Asteroid_violet ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Asteroid_white ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Asteroid_yellow ^{
                Name=Выпущенный из физгана астероид
                Text=Главное, не вставать у него на пути...
            }
            Missile_Average_item ^{
                Name=Выпущенный из физгана средний контейнер
                Text=Бесполезная трата ценных ресурсов
            }
            Missile_Big_item ^{
                Name=Выпущенный из физгана крупный контейнер
                Text=Бесполезная трата ценных ресурсов
            }
            Missile_Discharged_EMP_bomb ^{
                Name=Выпущенная из физгана разряженная ЭМП бомба
                Text=Не взорвётся, но может больно дать по лбу
            }
            Missile_Discharged_Stun_bomb ^{
                Name=Выпущенная из физгана разряженная оглушающая бомба
                Text=Не взорвётся, но может больно дать по лбу
            }
            Missile_EMP_bomb ^{
                Name=Выпущенная из физгана ЭМП бомба
                Text=Взведённая ЭМП бомба
            }
            Missile_Escape_pod ^{
                Name=Выпущенная из физгана спасательная капсула
                Text=Навстречу приключениям!
            }
            Missile_Fuel_tank ^{
                Name=Выпущенная из физгана ёмкость с топливом
                Text=Ёмкость с взрывоопасным веществом
            }
            Missile_Maloq_stool ^{
                Name=Выпущенный из физгана малокский табурет
                Text=Непоколебимый и гордый
            }
            Missile_Quark_bomb ^{
                Name=Выпущенная из физгана кварковая бомба
                Text=Взведённая кварковая бомба
            }
            Missile_Small_item ^{
                Name=Выпущенный из физгана небольшой контейнер
                Text=Бесполезная трата ценных ресурсов
            }
            Missile_Stun_bomb ^{
                Name=Выпущенная из физгана оглушающая бомба
                Text=Взведённая оглушающая бомба
            }
            Missile_Urine_tank ^{
                Name=Выпущенная из физгана ёмкость с уриной
                Text=Хоть один глоток...
            }
        }
        Name ^{
            PhysGun=Кастомное орудие физган (без акрина в игре не используется)
        }
        OriginalWeaponType ~{
            Industrial_Laser=1
            Fragmentation_Cannon=2
            Flux=3
            Missile_Launcher=4
            Treton=5
            Wave_Phaser=6
            Flow_Blaster=7
            Electronic_Cutter=8
            Multiresonator=9
            Atomic_Vision=10
            Disintegrator=11
            Turbogravitron=12
            IMHO-9000=13
            Vertix=14
            Torpedo_Tube=15
            Esodapher=16
            Caphasitor=17
            Lirecron=18
        }
        Text ^{
            PhysGun=Урон: <MinDamage>-<MaxDamage><br>Количество залпов: <Count>/<MaxCount> шт.
        }
    }
}
MicroModuls ^{
    ExpPhysGun_PhysGunEmpty ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Quark_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>отсутствует</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidBlue ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_blue
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidGreen ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_green
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidRed ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_red
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidViolet ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_violet
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidWhite ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_white
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAsteroidYellow ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Asteroid_yellow
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>астероид</color>
    }
    ExpPhysGun_PhysGunMissileAverageItem ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Average_item
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>средний предмет</color>
    }
    ExpPhysGun_PhysGunMissileBigItem ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Big_item
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>большой предмет</color>
    }
    ExpPhysGun_PhysGunMissileDischargedEMPBomb ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Discharged_EMP_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>разряженная ЭМП бомба</color>
    }
    ExpPhysGun_PhysGunMissileDischargedStunBomb ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Discharged_Stun_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>разряженная оглушающая бомба</color>
    }
    ExpPhysGun_PhysGunMissileEMPBomb ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_EMP_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>ЭМП бомба</color>
    }
    ExpPhysGun_PhysGunMissileEscapePod ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Escape_pod
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>спасательная капсула</color>
    }
    ExpPhysGun_PhysGunMissileFuelTank ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Fuel_tank
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>ёмкость с топливом</color>
    }
    ExpPhysGun_PhysGunMissileMaloqStool ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Maloq_stool
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>малокский табурет</color>
    }
    ExpPhysGun_PhysGunMissileQuarkBomb ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Quark_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>кварковая бомба</color>
    }
    ExpPhysGun_PhysGunMissileSmallItem ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Small_item
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>небольшой предмет</color>
    }
    ExpPhysGun_PhysGunMissileStunBomb ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Stun_bomb
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>оглушающая бомба</color>
    }
    ExpPhysGun_PhysGunMissileUrineTank ^{
        BlockImp=1
        BlockMM=1
        Cost=100
        Equipments=PhysGun
        LockedAcryn=3
        MissileGraph=Missile_Urine_tank
        NonSearchable=1
        Owner=Any
        Priority=0
        Size=100
        Special=1
        TextReplace=Физган - ручное устройство направленной антигравитации, изобретённое знаменитым гаальским доктором Рее-Кляйном, высокотехнологичный инструмент, предназначенный для использования при погрузочных работах на складах, в строительстве и для выполнения других подобных операций.
        TextReplace=Заряд: <color=255,240,100>ёмкость с уриной</color>
        bonShots=-2
    }
}
Script ^{
    Mod_ExpPhysGun ^{
        101=[Вернуться к повседневным обязаностям]
        103=Планета <0> находится в большой опасности. Мне необходимо найти способ уничтожить Астероид -<1>-, который угрожает с ней столкнуться.
        108=Отлично, мы уже перенесли физган в ваш трюм. Как только взлетите, ищите ближайший астероид, подлетите к нему и используйте встроенный в физган захват, чтобы поймать его. После чего запустите импровизированный снаряд в Разрушителя, вот собственно и все. Ничего сложного, но время поджимает, так что поторопитесь!
        109=Ну что же... Это ваше право. К сожалению, мы вряд ли теперь успеем найти кого-нибудь еще... Боюсь, жителям планеты <0> теперь остается рассчитывать только на скорейшую эвакуацию... Если честно - я разочарован в вас <Player>.
        110=Отлично! Покажите там этой каменюке! Вдарьте всей мощью, что у вас есть! Да и еще кое-что: как я уже говорил мы проводим эвакуацию, однако она и гроша ломанного не будет стоить, если на наши лайнеры нападут пираты, а ведь они могут. Очень вас прошу, если у вас будет возможность, постарайтесь защитить наши эвакуационные лайнеры, в случае чего. А теперь идите... Скорее, <Player>, наша жизнь сейчас в ваших руках... Еще в руках других пилотов, что сейчас пытаются сбить астероид, но это не повод расслабляться! Вперед!
        111=Вы что все еще здесь? На нас все еще летит самый большой астероид в истории коалиции, у нас действительно нет времени на праздные разговоры. Отправляйтесь в космос и уничтожьте уже эту чертову каменюгу!
        113=Ну, давайте сюда свою пукалку. Только учтите, если и она попытается меня взорвать, то я сюда вернусь!
        114=Что вы, разумеется нет... Позвольте, я вам объясню: дело в том, что внутренняя структура данного космического тела представляет собой огромный кристалл. Плотность этого кристалла невероятно высока и все, что сможет ему сделать наше стандартное вооружение - уничтожить верхний слой, состоящий из мягких горных пород и водяного льда, и слегка поцарапать сердцевину. Однако путь есть и он состоит в том, чтобы разбить кристалл. Достаточно всего нескольких точных ударов большой мощности. Приложить, так сказать, достаточно кинетической энергии, на достаточно малой площади и к счастью мы уже придумали, как это сделать. Нужно запустить в нашего Разрушителя, именно так мы его тут называем, другой астероид, точнее несколько...<br>Не надо смотреть на меня как на умалишенного, это действительно можно сделать. Слышали когда-нибудь о физических устройствах направленной антигравитации? В просторечье физганах? Эти устройства были изобретены знаменитым гаальским инженером Рее-Кляйном и используются сейчас для погрузочных работ. Мы же увеличили энергетическое ядро физгана и добавили ему стазисный генератор нулевой энергии, естественно это привело к увеличению устройства и невозможности его ручного использования, зато резко увеличили максимальную массу объектов, которые он может перемещать, а создание вокруг перемещаемого объекта энергетического стазиса защищает его от любых повреждений. Короче говоря - представляем вам первую экспериментальную модель <clr>Бортового физгана<clrEnd>. Он способен захватывать объекты размером со стандартный астероид и помещать их в стазис под днищем корабля, а когда вам понадобиться, достаточно направить физган в нужную сторону и отключить стазис - большое количество энергии, до тех пор изолируемое от объекта с помощью стазиса, войдет в свои права и придаст объекту огромное ускорение. К сожалению это делает бортовой физган совершенно несостоятельным как устройство для перемещения грузов, зато делает его полезным в качестве оружия, чем вам и необходимо воспользоваться, если вы конечно согласитесь. Как я уже сказал - это первая экспериментальная модель. Возможны... форс-мажоры... Но учтите, если вы откажетесь - это может стать причиной гибели целой планеты.
        116=Всегда хотел оставить свой след в истории! Новое имя планеты... дайте-ка подумать...
        119=Кроме того, пусть и не всем, но хотя бы некоторым лайнерам удалось успешно эвакуировать часть жителей с нашей планеты. По нашим данным, места назначения достигли <0> лайнеров из <1>. А теперь, если вы не против, предлагаю проследовать на банкет.
        120=К сожалению, наше торжество омрачается тем, что все лайнеры, которые мы снарядили эвакуировать мирных жителей, были уничтожены, но я уверен, что это не ваша вина, в конце концов, вашей первостепенной задачей было остановить астероид. А теперь, если вы не против, предлагаю проследовать на банкет.
        121=Сматываемся отсюда!
        123=[Подготовить орудия и выставить курс на перехват, но перед этим передать информацию об астероиде на планету <0>]
        124=Планета <0> находится в большой опасности. Мне необходимо найти способ уничтожить астероид -<1>-, который может вскоре с ней столкнуться.
        125=Они хотели всучить мне какую-то непонятную экспериментальную пушку. На вид доверия она не вызывает, так что я отказался. Меньше всего мне нужно, чтобы она взорвала мой корабль в самый ответственный момент, придётся справляться самому.
        128=Во время гиперпрыжков время тянется особенно медленно. Изнывая от скуки, вы открыли Галанет, на странице посвященной истории системы <0>. Ничего особенного... за исключением древней секты "Наследие свидетеля", которая поклялась наслать проклятие "Армагеддон 13-го уровня" на все планеты, где отказались выполнить их требования. Секта была довольно обширной и насчитывала несколько ячеек в разных системах. Возможно, вы ещё не раз встретите упоминание о них.<br>Увлёкшись чтением, данная тема всё ещё вызывает интерес у общества, вы и не заметили, как вышли из гиперпространства.
        129=Вот вы где! Наш герой и спаситель рейнджер <Player>! Я бы расцеловал вас, но боюсь меня могут не правильно понять. Мы вас уже тут заждались! Банкет в вашу честь уже подготовлен, но это не самое главное... Что? А награда! Конечно, как я мог забыть! Сумма в <0> cr. уже переведена на ваш счет, точно также как и наша бесконечная благодарность!<br><1>
        130=[На всякий случай проверить систему на наличие аномалий]
        131=Вы спасли целую планету! Мы видели, как это произошло. Было так круто! Вы запускаете свой астероид прямо по Разрушителю, и он раскалывается на мелкие кусочки! У нас тут столько народу хотят взять у вас автограф! Что говорите? Физган взорвался от перегрузки? Ну, бывает, это ведь первая экспериментальная модель была. Так вы дадите мне автограф? Ну ладно, ладно, не надо на меня так смотреть...<br>В качестве извинения за инцидент с поломкой мы хотим предложить вам обновленную версию физгана. Защитные механизмы были значительно усовершенствованы, так что теперь мы можем гарантировать, что никаких взрывов от перегрузки не будет… Ну по крайней мере в <clr>99%<clrEnd> случаев... В <clr>98%<clrEnd> так точно... Ну может быть в <clr>97%<clrEnd>...<br>Кроме того, мы оборудовали новую модель удобным приемником, позволяющим заряжать её прямо <clr>изнутри корабля<clrEnd>. Собственно, вы и раньше могли это делать, просто это было бы не так удобно... А я что, не говорил вам? Ну значит забыл. Так вот, заряжать вы его можете практически чем угодно. Абсолютно все, что есть у вас в трюме, может быть использовано в качестве снаряда для физгана. Разумеется, возможность захватывать астероиды тоже никуда не делась. Единственное, что нам так и не удалось - это добавить совместимость с микромодулями. Уж слишком нетипичное в плане применения устройство, так сказать.<br>Ну, что скажете?
        133=Сперва вы не поверили собственным глазам.<br>Огромный астероид держит курс прямиком в центр системы! Бортовой компьютер рассчитал приблизительную траекторию движения:<br>Порядковый номер астероида: <0><br>Класс астероида: ???<br>Скорость: <1><br>Координаты: <2>, <3><br>Направление: <4><br>С вероятностью <5>% астероид столкнётся с планетой <6>!
        135=Мощный взрыв сотряс корабль и выбил вас из кресла пилота. Физган взорвался и чуть было не уничтожил ваш корабль. Не совсем, правда, понятно, что стало тому причиной... Может быть, пыль попала? Или он не выдержал полётных нагрузок? Так или иначе, теперь от этой игрушки пользы нет.
        136=Планета <0> находится в большой опасности. Мне необходимо найти способ уничтожить Астероид -<1>-, который может вскоре с ней столкнуться.
        137=Столкновение подтверждено. Практически всё население и вся инфраструктура планеты <0> были уничтожены. Повторяю. Столкновение подтверждено...
        139=Требуется помощь всех свободных пилотов! СРОЧНО! ВСЕМ КОРАБЛЯМ!<br>Чрезвычайная ситуация в системе <0>! Планета <1> в большой опасности!<br>Повторяю: Требуется помощь всех свободных пилотов! СРОЧНО! ВСЕМ КОРАБЛЯМ! Чрезвычайная ситуация в системе...
        140=Рейнджер, <Player>, от лица всего спасённого вами населения планеты <0>, позвольте пригласить вас на торжественную церемонию награждения. Мы все вас очень ждём.
        141=Кроме того, абсолютно все лайнеры, которых мы послали, успешно достигли пункта назначения. Это самая настоящая победа! Деньги не могут служить в данном случае адекватной оценкой вашего труда, <Player>. Мы долго думали чем бы достойно отблагодарить вас и после долгих споров в Галактическом Совете нам всё таки разрешили дать вам уникальную возможность переименовать нашу планету!
        142=Ого! А вы затейник, <Player>. Замечательное название подобрали нашей планете.<br>Чтобы утрясти все бюрократические формальности нам потребуется где-то ещё неделька. Но не сомневайтесь, жители планеты <0> уже приняли своё твёрдое решение!
        143=Рад, что вам тоже понравилось :-)
        144=История с астероидом получила неожиданное продолжение. Правительство планеты <0>, в качестве особой награды, разрешило своему спасителю (рейнджер <Player>) переименовать планету. Галактический Совет, в последний момент, наложил запрет на смену названия, но абсолютная поддержка жителей спасённой планеты не оставила им выбора. Теперь планета <1> называется <2>! Данные всех галактических карт уже изменены.
        146=Мне предоставили какую-то экспериментальную пушку, говорят, с помощью неё астероид можно будет уничтожить. Ну попробуем. Все что от меня требуется - это ловить маленькие астероиды и запускать их в большой. Даже ребёнок справится.
        147=Чтобы захватить астероид физганом, подлетите к нему на близкое расстояние, затем откройте окно "Корабль" (<clr>S<clrEnd>). В окне корабля поместите бортовой физган в слот орудия, после чего нажмите на него левой кнопкой мыши. Слева от экрана корабля должна появиться дополнительная кнопка с надписью "Активировать". При нажатии на нее, физган захватит ближайший астероид.
        22=Похоже, обычные пушки его не берут. Мне прислали сообщение с технологического центра <0>, возможно, они чем-то смогут помочь.
        27=Поступила информация, что в системе <0> обнаружен астероид рекордных размеров. К несчастью, траектория полета астероида с большой вероятностью пересечется с планетой <1>, на которой сейчас объявлен режим чрезвычайного положения. В случае столкновения ни системы планетарной защиты, ни подземные убежища не смогут уберечь жителей планеты. Галактический Совет обратился с убедительной просьбой к каждому пилоту прибыть в систему и помочь с эвакуацией, либо с уничтожением астероида.
        31=Понял, конец связи
        33=Внимание, рейнджер <Player>! Немедленно прекратите атаку на планетоид и как можно скорее прибудьте на технологический центр <0>! Это дело первостепенной важности!
        34=Рейнджер <Player>, наконец-то вы прибыли! Мы боялись, что вы пропустите наше сообщение или не предадите ему значения, особенно учитывая насколько важным делом вы были заняты. Но все дело в том, что ваши попытки сбить данный планетоид ни к чему не приведут, он обладает слишком необычной структурой, стандартное бортовое вооружение просто не в состоянии нанести ему хоть сколько-нибудь существенный урон.
        40=И что же теперь делать? Неужели опускать руки и дать планете погибнуть?
        41=Ладно, уговорили. Ставьте свой агрегат
        42=Ну уж нет, не надо мне такой радости. Еще взорвется у меня на корабле, знаю я вас
        44=Уже вылетаю!
        45=Мне предоставили какую-то экспериментальную пушку, говорят, с помощью неё астероид можно будет уничтожить. Ну попробуем. Все что от меня требуется - это ловить маленькие астероиды и запускать их в большой. Даже ребенок справиться.
        47=Ничем не могу вам с этим помочь
        49=Мне сейчас некогда общаться, <Player>. Я провожу эвакуацию населения с планеты <0>, которая находиться под угрозой столкновения с астероидом. Нужно вывести от туда как можно больше жителей, ни секунды нет, чтобы передохнуть.
        50=Конец связи
        51=Рейнджер <Player>! Наконец-то адекватное лицо. Вы просто представить себе не можете, что тут творится. Все наши попытки не допустить паники потерпели сокрушительное фиаско! В космопорте гигантские толпы беженцев, все наши транспортники работают на пределе, но всех вывезти мы все равно не успеем.<br>Народ уже дошел до предела, бегают повсюду с плакатами на тему нашего незавидного будущего, а точнее его отсутствия. Из всех щелей повылезали фанатики, зачитывающие такие места из религиозных текстов, что мне самому становится не по себе, и я уже не говорю про мародеров... Словом - ад, такое впечатление, что астероид уже в нас врезался. Не помню такого бардака с тех времен, когда широкая общественность впервые услышала о доминаторах.<br>Так или иначе, у нас тут объявлено чрезвычайное положение и нам бы очень пригодилась ваша помощь. Астероид необходимо уничтожить и за это мы уже назначили крупную награду, вы готовы нам помочь?
        53=И вы туда же? Проклятье, скоро с этим астероидом вообще нормальных гуманоидов не останется. Ну тогда проваливайте, хватит отнимать мое время! Единственная просьба: когда будете убегать, словно крыса с тонущего корабля, хотя бы захватите с собой кого-нибудь из местных. Хотя бы чуть-чуть облегчите мою задачу.
        54=Опять вы?! У меня нет времени слушать ваши апокалиптические бредни! Я пытаюсь как-то организовать то недоразумение, что у нас называют эвакуацией, и вы мне тут совсем не помогаете. Проваливайте.
        56=Разумеется готов!
        57=Мы все погибнем! Надо бежать! КОНЕЦ БЛИЗОК!
        58=Уже бегу!
        61=Мощный взрыв сотряс корабль и выбил вас из кресла пилота. Физган взорвался и чуть было не уничтожил ваш корабль. Не совсем, правда, понятно, что стало тому причиной... Может быть, пыль попала? Или он не выдержал полетных нагрузок? Так или иначе, теперь от этой игрушки пользы нет.
        62=Сегодня, благодаря слаженным действиям пилотов в системе <0>, а также личному героизму рейнджера с позывным <Player>, была предотвращена, возможно, самая крупная катастрофа за всю историю Коалиции. Астероид рекордных размеров чуть было не уничтожил всю жизнь на планете <1>, но трагедии удалось избежать. Власти спасенной планеты уже изъявили желание по-королевски наградить рейнджера.
        63=Уничтожение цели - Астероид -<0>- подтверждено. Планета <1> вне опасности. Повторяю. Уничтожение цели...
        64=Сегодняшний день <0> объявлен датой траура. Сегодня произошла одна из самых ужасных катастроф за все историю Коалиции. Миллионы жителей планеты <1> (система <2>) погибли в результате её столкновения с Астероидом -<3>-. Поиски выживших уже ведутся, но спасатели утверждают, что надежды очень призрачны - столкновение было безумно мощным. Почтим погибших минутой молчания.
        66=Гравитация звезды <0> увеличивает скорость Астероида -<1>- и меняет его траекторию, вероятность столкновения с планетой <2> существенно увеличилась.
        67=Астероид -<0>- снова изменил свою траекторию движения, аналитики пересчитали расчетное время столкновения, которое теперь составляет <1> дней.
        68=Столкновение с Астероидом -<0>- произойдёт в течении дня. Паника на планете <1> достигла пика!
        71=Нет, я уже ухожу
        72=А, это вы, <Player>... а вы чего хотите? Награду за уничтожение астероида? Ну ладно, так уж и быть. Спасибо! Похоже вы чем-то недовольны, придётся добавить лично от себя... БОЛЬШОЕ СПАСИБО!!!<br>Мы всё видели, астероид развалился сам по себе так и не долетев до нашей планеты. А паники то сколько было! Вам ещё что-то надо?
        73=День прожит не зря! Планета <0> спасена от неминуемой гибели, меня публично объявили героем, а самое главное - мой банковский счет изрядно потолстел. Кто бы мог подумать, что предотвращение катастрофы планетарного масштаба может принести столько положительных эмоций.
        79=Проследовать на банкет
        88=Новое имя планеты:
        89=Благодарю за оказаную честь, но я не могу себе такого позволить... А от банкета не откажусь!
        90=Планета с таким именем уже существует, повторите ввод.
        91=Новое имя планеты слишком длинное, повторите ввод.
        97=Нет уж, спасибо. Не надо мне такого счастья. Не доверяю я теперь этим вашим экспериментальным технологиям
        AsteroidToMissileList ^{
            00 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            01 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            02 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            03 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            04 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            05 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            06 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            07 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            08 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            09 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            10 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            11 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            12 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            13 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            14 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Blue00 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue01 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue02 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue03 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue04 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue05 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue06 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue07 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue08 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            Blue09 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            Blue10 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Blue11 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue12 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue13 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue14 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue15 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue16 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidBlue
            }
            Blue17 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            Blue18 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green00 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green01 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green02 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green03 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green04 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green05 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green06 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green07 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green08 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green09 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidViolet
            }
            Green10 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green11 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green12 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidGreen
            }
            Green13 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            Green14 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red00 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red01 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red02 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red03 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red04 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red05 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red06 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red07 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red08 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red09 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            Red10 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red11 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Red12 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidYellow
            }
            Red13 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidRed
            }
            Yellow00 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow01 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow02 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow03 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow04 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow05 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow06 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
            Yellow07 ^{
                AcrynNumInCfg=ExpPhysGun_PhysGunMissileAsteroidWhite
            }
        }
        PhysGunDestroyedName=Уничтоженный физган
        PhysGunName=Бортовой физган
        PhysGunPrototypeName=Непротестированный физган
        UrineHumiliation1=ДА ТЫ ЧЁ, ОХРЕНЕЛ!!?
        UrineHumiliation2=ААААРГХ!!! А НУ ИДИ СЮДА, ТЫ, МЕЛКИЙ ССЫКЛИВЫЙ СВАРОКОК!!!
        UrineHumiliation3=Ох, фу, боже! Боже мой, что это!? Это что, ты сделал?! Да я же тебя сейчас просто изничтожу!!!
        UrineHumiliation4=Ну всё, приятель. Ты только что нарвался на танец с девияблом...
    }
}
ActCodeBlocksList ^{
    AsteroidCrashActCode ^{
        01=if(ScriptItemActionType(t_OnStep))
        02 ^{
            01=if(GroupToShip(Asteroid))
            02 ^{
                01=if(GroupIn(Asteroid, TargetRadius))
                02 ^{
                    01=if(ShipInNormalSpace(Player()) && ShipStar(Player()) == ScriptStar) ShowEffect('Weapon.MissileHit', 4, TargetPlanet, TargetPlanet, 0, 0, 0, 0, 0, 0);
                    02=moveState = 7;
                    03=GExpPhysGunGlobalState = -4;
                    04=ShipDestroy(GroupToShip(Asteroid), 1);
                    05=for(i = 0; i < StarShips(ScriptStar); i = i + 1)
                    06 ^{
                        01=dwd0 = StarShips(ScriptStar, i);
                        02=if(ShipGetBad(dwd0) == GroupToShip(Asteroid)) TruceBetweenShips(dwd0, GroupToShip(Asteroid));
                    }
                }
            }
        }
    }
    PhysGunActCode ^{
        01=dword physGun = CurItem();
        02=if(ScriptItemActionType(t_OnCheckingUsability2))
        03 ^{
            01=if(WeaponAmmunition(physGun)) exit;
            02=dword loaded_item = ScriptItemActObject1();
            03=int item_size = ItemSize(loaded_item);
            04=if(item_size > ItemSize(ShipItems(Player(), 0)) / 2) exit;
            05=if(ItemInScript(loaded_item)==1)
            06 ^{
                01=int item_acryn = EqSpecial(loaded_item);
                02=if(~item_acryn)
                03 ^{
                    01=if(!CT('MicroModuls.' + BonusNumInCfg(item_acryn) + '.ScriptItemIgnore')) exit;
                }
                04=else exit;
            }
            07=ScriptItemActParam(1);
        }
        04=if(ScriptItemActionType(t_OnCheckingUsabilityGoods))
        05 ^{
            01=if(WeaponAmmunition(physGun)) exit;
            02=ScriptItemActParam(1);
        }
        06=else if(ScriptItemActionType(t_OnAnotherItem2))
        07 ^{
            01=if(ItemIsBroken(physGun)) exit;
            02=if(!WeaponAmmunition(physGun))
            03 ^{
                01=loaded_item = ScriptItemActObject1();
                02=int item_type = ItemType(loaded_item);
                03=item_size = ItemSize(loaded_item);
                04=if(item_type != t_Hull)
                05 ^{
                    01=if(ItemInScript(loaded_item)==1)
                    02 ^{
                        01=item_acryn = EqSpecial(loaded_item);
                        02=if(~item_acryn)
                        03 ^{
                            01=if(!CT('MicroModuls.' + BonusNumInCfg(item_acryn) + '.ScriptItemIgnore'))
                            02 ^{
                                01=MessageBox('Пожалуй, ' + Name(loaded_item) + ' ещё может вам пригодиться. Неразумно будет превращать его в одноразовый метательный снаряд.');
                                02=exit;
                            }
                        }
                        04=else
                        05 ^{
                            01=MessageBox('Пожалуй, ' + Name(loaded_item) + ' ещё может вам пригодиться. Неразумно будет превращать его в одноразовый метательный снаряд.');
                            02=exit;
                        }
                    }
                    03=int size_limit = round(ItemSize(ShipItems(Player(), 0)) / 2, 100);
                    04=if(item_size > size_limit) MessageBox('Данный предмет имеет размер более <color=0,50,200>' + size_limit + '</color> ед. и не может быть заряжен в физган.');
                    05=if(MessageBoxYesNo('Вы точно хотите зарядить <color=0,50,200>' + Name(loaded_item) + '</color> в физган?'))
                    06 ^{
                        01=str text;
                        02=dword physGunConf = GetCustomWeaponInfo('PhysGun');
                        03=int splash = 0;
                        04=while(1)
                        05 ^{
                            01=if(item_type == t_ArtefactBomb)
                            02 ^{
                                01=text = 'ExpPhysGun_PhysGunMissileQuarkBomb';
                                02=int damage = item_size;
                                03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                04=break;
                            }
                            03=if(item_type == t_UselessItem)
                            04 ^{
                                01=text = EquipmentImageName(loaded_item);
                                02=if(text == 'RNDbomb_1')
                                03 ^{
                                    01=text = 'ExpPhysGun_PhysGunMissileQuarkBomb';
                                    02=damage = item_size;
                                    03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                    04=break;
                                }
                                04=if(text == 'RNDbomb_2')
                                05 ^{
                                    01=if(UselessItemData(loaded_item, 2) != 1)
                                    02 ^{
                                        01=text = 'ExpPhysGun_PhysGunMissileStunBomb';
                                        02=damage = item_size;
                                        03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                        04=break;
                                    }
                                    03=else
                                    04 ^{
                                        01=text = 'ExpPhysGun_PhysGunMissileDischargedStunBomb';
                                        02=damage = item_size;
                                        03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                        04=break;
                                    }
                                }
                                06=if(text == 'RNDbomb_3')
                                07 ^{
                                    01=if(UselessItemData(loaded_item, 2) != 1)
                                    02 ^{
                                        01=text = 'ExpPhysGun_PhysGunMissileEMPBomb';
                                        02=damage = item_size;
                                        03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                        04=break;
                                    }
                                    03=else
                                    04 ^{
                                        01=text = 'ExpPhysGun_PhysGunMissileDischargedEMPBomb';
                                        02=damage = item_size;
                                        03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                        04=break;
                                    }
                                }
                                08=if(text == 'Usl_Urine')
                                09 ^{
                                    01=text = 'ExpPhysGun_PhysGunMissileUrineTank';
                                    02=damage = item_size;
                                    03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                    04=break;
                                }
                                10=if(text == 'Usl_64')
                                11 ^{
                                    01=text = 'ExpPhysGun_PhysGunMissileMaloqStool';
                                    02=damage = Rnd(100, 200);
                                    03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+8+512+1024+2048+1048576);
                                    04=break;
                                }
                                12=if(text == 'Usl_EscapePod')
                                13 ^{
                                    01=text = 'ExpPhysGun_PhysGunMissileEscapePod';
                                    02=damage = item_size;
                                    03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+8+512+1024+2048+1048576);
                                    04=break;
                                }
                            }
                            05=if(item_type == t_FuelTanks || item_type == t_Cistern)
                            06 ^{
                                01=text = 'ExpPhysGun_PhysGunMissileFuelTank';
                                02=damage = item_size / 3;
                                03=tempActCodeData2 = ContainerFuel(loaded_item);
                                04=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                04=break;
                            }
                            07=if(item_size <= 20) text = 'ExpPhysGun_PhysGunMissileSmallItem';
                            08=else if(item_size <= 75) text = 'ExpPhysGun_PhysGunMissileAverageItem';
                            09=else text = 'ExpPhysGun_PhysGunMissileBigItem';
                            10=if(item_type >= t_Weapon1 && item_type <= t_CustomWeapon)
                            11 ^{
                                01=if(GetEquipmentStats(loaded_item, 3) == 2)
                                02 ^{
                                    01=damage = WeaponAmmunition(loaded_item) * 2 + item_size / 3;
                                    02=splash = 1;
                                }
                                03=else damage = item_size + item_size / 2;
                                04=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                05=break;
                            }
                            12=if(item_type >= t_Artefact && item_type <= t_DefGenerator)
                            13 ^{
                                01=damage = item_size + item_size / 2;
                                02=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                                03=break;
                            }
                            14=damage = item_size;
                            15=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                            16=break;
                        }
                        06=SetEquipmentStats(physGun, damage - 1, 1);
                        07=SetEquipmentStats(physGun, damage, 0);
                        08=tempActCodeData = ItemOwner(loaded_item);
                        09=if(splash) SetCustomWeaponShotData(physGunConf, 'Missile', 5000, 800, 150);
                        10=else SetCustomWeaponShotData(physGunConf, 'Rocket', 5000, 800, 0);
                        11=SpecialToEquipment(FindBonusByNameInCfg(text), physGun);
                        12=WeaponAmmunition(physGun, 1);
                        13=tempActCodeData3 = item_size;
                        14=ItemSize(physGun, ItemSize(physGun) + tempActCodeData3);
                        15=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeLoaded'));
                        16=PutItemInVault('PhysGunChamber', FormShipCurItem('Detach'));
                        17=ScriptItemActParam(2);
                    }
                    07=else
                    08 ^{
                        01=ScriptItemActParam(2);
                        02=exit;
                    }
                }
            }
            04=else exit;
        }
        08=else if(ScriptItemActionType(t_OnAnotherGoods))
        09 ^{
            01=if(ItemIsBroken(physGun)) exit;
            02=if(WeaponAmmunition(physGun)) exit;
            03=item_type = ScriptItemActObject1();
            04=if(MessageBoxYesNo('Вы точно хотите зарядить <color=0,50,200>' + lowercase(CT('Items.Goods.NameBuy.' + (item_type + 1))) + '</color> в физган?'))
            05 ^{
                01=item_size = ScriptItemActObject2();
                02=physGunConf = GetCustomWeaponInfo('PhysGun');
                03=SetCustomWeaponDamageData(physGunConf, 1, 1, 2+2048+1048576);
                04=SetEquipmentStats(physGun, item_size - 1, 1);
                05=SetEquipmentStats(physGun, item_size, 0);
                06=SetCustomWeaponShotData(physGunConf, 'Rocket', 5000, 800, 0);
                07=if(item_size <= 20) text = 'ExpPhysGun_PhysGunMissileSmallItem';
                08=else if(item_size <= 75) text = 'ExpPhysGun_PhysGunMissileAverageItem';
                09=else text = 'ExpPhysGun_PhysGunMissileBigItem';
                10=SpecialToEquipment(FindBonusByNameInCfg(text), physGun);
                11=WeaponAmmunition(physGun, 1);
                12=tempActCodeData3 = item_size;
                13=ItemSize(physGun, ItemSize(physGun) + tempActCodeData3);
                14=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeLoaded'));
                15=loaded_item = CreateGoods(item_type, item_size);
                16=ItemCost(loaded_item, FormShipCurItem('StackableCost'));
                17=PutItemInVault('PhysGunChamber', loaded_item);
                18=ScriptItemActParam(item_size);
            }
        }
        10=if(!ItemIsInUse(physGun)) exit;
        11=if(ScriptItemActionType(t_OnMissileShot))
        12 ^{
            01=dword missile = ScriptItemActObject1();
            02=if(CustomMissileType(missile) != 'PhysGun') exit;
            03=float angle = Angle(WeaponTarget(physGun), missile);
            04=MissileAngle(missile, angle);
            05=MissileLive(missile, 200);
            06=MissileSpeed(missile, 5000);
            07=unknown PortionInDiapason = ImportedFunction('UtilityFunctions', 'PortionInDiapason');
            08=if(ScriptItemData(physGun, 3) == -1)
            09 ^{
                01=if(Rnd(1, 100) <= PortionInDiapason(Dist(missile, MissileTarget(missile)), 0, GetCustomWeaponData('PhysGun', 'MissileRadius'), 25, 90))
                02 ^{
                    01=MissileTarget(missile, 0);
                }
            }
            10=else if(Rnd(1, 100) <= PortionInDiapason(Dist(missile, MissileTarget(missile)), 0, GetCustomWeaponData('PhysGun', 'MissileRadius'), 0, 45))
            11 ^{
                01=MissileTarget(missile, 0);
            }
            12=SpecialToEquipment(FindBonusByNameInCfg('ExpPhysGun_PhysGunEmpty'), physGun);
            13=WeaponAmmunition(physGun, 0);
            14=ItemSize(physGun, ItemSize(physGun) - tempActCodeData3);
            15=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeEmpty'));
            16=ItemDurability(physGun, ItemDurability(physGun) - Rnd(4, 8));
            17=str acryn_name = BonusNumInCfg(EqSpecial(missile));
            18=if(findsubstr(acryn_name, 'Asteroid') == -1)
            19 ^{
                01=FreeItem(GetItemFromVault('PhysGunChamber'));
                02=if(acryn_name == 'ExpPhysGun_PhysGunMissileEscapePod')
                03 ^{
                    01=if(MissileOwner(missile) == Player())
                    02 ^{
                        01=dword cur_star = MissileStar(missile);
                        02=for(int i = 0; i < StarPlanets(cur_star); i = i + 1)
                        03 ^{
                            01=dword planet = StarPlanets(cur_star, i);
                            02=if(PlanetOwner(planet) != 6) RelationToRanger(planet, Player(), RelationToRanger(planet, Player()) - 15);
                        }
                    }
                }
            }
        }
        13=else if(ScriptItemActionType(t_OnMissileShot2))
        14 ^{
            01=missile = ScriptItemActObject2();
            02=if(CustomMissileType(missile) != 'PhysGun') exit;
            03=dword target = ScriptItemActObject1();
            04=cur_star = MissileStar(missile);
            05=acryn_name = BonusNumInCfg(EqSpecial(missile));
            06=if(acryn_name == 'ExpPhysGun_PhysGunMissileQuarkBomb')
            07 ^{
                01=if(IsScriptActive('Mod_ExpArts'))
                02 ^{
                    01=dword item = CreateQuestItem('RNDbomb_1', tempActCodeData);
                    02=UselessItemData(item, 2, -6);
                    03=UselessItemData(item, 3, Id(cur_star) - 1);
                    04=CreateActCodeEvent(t_OnItemPickUp, item, target, item, 1, 0);
                    05=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                    06=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                    07=StopMovingItem(cur_star, item);
                }
                03=else
                04 ^{
                    01=item = CreateArt(t_ArtefactBomb, tempActCodeData);
                    02=DropItemInSystem(cur_star, item, CoordX(target), CoordY(target), CoordX(target), CoordY(target));
                    03=StopMovingItem(cur_star, item);
                    04=FireWeapon(target, item, 0);
                }
            }
            08=else if(acryn_name == 'ExpPhysGun_PhysGunMissileStunBomb')
            09 ^{
                01=item = CreateQuestItem('RNDbomb_2', tempActCodeData);
                02=UselessItemData(item, 2, -6);
                03=UselessItemData(item, 3, Id(cur_star) - 1);
                04=CreateActCodeEvent(t_OnItemPickUp, item, target, item, 1, 0);
                05=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                06=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                07=StopMovingItem(cur_star, item);
            }
            10=else if(acryn_name == 'ExpPhysGun_PhysGunMissileEMPBomb')
            11 ^{
                01=item = CreateQuestItem('RNDbomb_3', tempActCodeData);
                02=UselessItemData(item, 2, -6);
                03=UselessItemData(item, 3, Id(cur_star) - 1);
                04=CreateActCodeEvent(t_OnItemPickUp, item, target, item, 1, 0);
                05=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                06=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                07=StopMovingItem(cur_star, item);
            }
            12=else if(acryn_name == 'ExpPhysGun_PhysGunMissileFuelTank')
            13 ^{
                01=if(tempActCodeData2)
                02 ^{
                    01=if(IsScriptActive('Mod_ExpArts'))
                    02 ^{
                        01=item = CreateQuestItem('RNDbomb_1', tempActCodeData);
                        02=UselessItemData(item, 2, -6);
                        03=UselessItemData(item, 3, Id(cur_star) - 1);
                        04=CreateActCodeEvent(t_OnItemPickUp, item, target, item, 1, tempActCodeData2);
                        05=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                        06=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                        07=StopMovingItem(cur_star, item);
                    }
                    03=else
                    04 ^{
                        01=item = CreateEquipment(t_Cistern, MissileMaxDamage(missile), tempActCodeData2, tempActCodeData);
                        02=DropItemInSystem(cur_star, item, CoordX(target), CoordY(target), CoordX(target), CoordY(target));
                        03=StopMovingItem(cur_star, item);
                        04=FireWeapon(target, item, 0);
                    }
                }
            }
            14=else
            15 ^{
                01=if(~findsubstr(acryn_name, 'Asteroid'))
                02 ^{
                    01=int size_minerals = round(0.80 * GetEquipmentStats(physGun, 0) / 1.5);
                    02=if(size_minerals)
                    03 ^{
                        01=int minerals_dropped = 0;
                        02=while(size_minerals)
                        03 ^{
                            01=int part_size = 0;
                            02=if(size_minerals < 10 || minerals_dropped >= 3) part_size = size_minerals;
                            03=else part_size = round((0.2 * (0.1 * Rnd(0, 10)) + 0.55) * size_minerals);
                            04=size_minerals = size_minerals - part_size;
                            05=minerals_dropped = minerals_dropped = 1;
                            06=dword minerals = CreateGoods(t_Minerals, part_size, 1);
                            07=angle = 0.01 * Rnd(0, 200) * pi;
                            08=int rad = Rnd(50, 150);
                            09=DropItemInSystem(cur_star, minerals, CoordX(target), CoordY(target), round(cos(angle) * rad) + CoordX(target), round(sin(angle) * rad) + CoordY(target));
                        }
                    }
                    04=damage = 0;
                    05=str str_type = ShipType(target);
                    06=if(target == Blazer() || target == Keller() || target == Terron() || str_type == 'Machpella')
                    07 ^{
                        01=damage = Rnd(185, 315, sqr(CurTurn()) + CurTurn() + 42);
                    }
                    08=else
                    09 ^{
                        01=item = ShipItems(target, 0);
                        02=if(!ShipProtectability(target))
                        03 ^{
                            01=if(ItemSize(item) <= 150) damage = ItemSize(item) + 20;
                            02=else if(ItemSize(item) < 300) damage = 80 * ItemSize(item) / 100;
                            03=else damage = Rnd(30, 50, sqr(CurTurn()) + CurTurn() + 3) * ItemSize(item) / 100;
                        }
                        04=else
                        05 ^{
                            01=if(ItemSize(item) <= 150) damage = 50 * ItemSize(item) / 100;
                            02=else if(ItemSize(item) < 300) damage = 40 * ItemSize(item) / 100;
                            03=else damage = Rnd(15, 25, sqr(CurTurn()) + CurTurn() - 3) * ItemSize(item) / 100;
                        }
                        06=int resist = ShipSpecialBonuses(target, bonResistAsteroid, 'Total');
                        07=if(resist > 100) resist = 100;
                        08=else if(resist < 0) resist = 0;
                        09=damage = damage - round(0.01 * resist * damage);
                    }
                    10=MissileMinDamage(missile, damage - 1);
                    11=MissileMaxDamage(missile, damage);
                }
            }
        }
        16=else if(ScriptItemActionType(t_OnMissileHittingObject))
        17 ^{
            01=missile = ScriptItemActObject2();
            02=if(CustomMissileType(missile) != 'PhysGun') exit;
            03=target = ScriptItemActObject1();
            04=cur_star = MissileStar(missile);
            05=acryn_name = BonusNumInCfg(EqSpecial(missile));
            06=if(acryn_name == 'ExpPhysGun_PhysGunMissileQuarkBomb')
            07 ^{
                01=if(IsScriptActive('Mod_ExpArts'))
                02 ^{
                    01=item = CreateQuestItem('RNDbomb_1', tempActCodeData);
                    02=CoordX(item, CoordX(target));
                    03=CoordY(item, CoordY(target));
                    04=UselessItemData(item, 2, -4);
                    05=UselessItemData(item, 3, Id(cur_star) - 1);
                    06=CreateActCodeEvent(t_OnItemHit, item, target, missile, cur_star, 0);
                    07=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                    08=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                    09=StopMovingItem(cur_star, item);
                }
                03=else
                04 ^{
                    01=item = CreateArt(t_ArtefactBomb, tempActCodeData);
                    02=DropItemInSystem(cur_star, item, CoordX(target), CoordY(target), CoordX(target), CoordY(target));
                    03=StopMovingItem(cur_star, item);
                    04=FireWeapon(Player(), item, 0);
                }
            }
            08=else if(acryn_name == 'ExpPhysGun_PhysGunMissileStunBomb')
            09 ^{
                01=item = CreateQuestItem('RNDbomb_2', tempActCodeData);
                02=CoordX(item, CoordX(target));
                03=CoordY(item, CoordY(target));
                04=UselessItemData(item, 2, -4);
                05=UselessItemData(item, 3, Id(cur_star) - 1);
                06=CreateActCodeEvent(t_OnItemDestroy, item, target, missile, cur_star, 0);
                08=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                09=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                10=StopMovingItem(cur_star, item);
            }
            10=else if(acryn_name == 'ExpPhysGun_PhysGunMissileEMPBomb')
            11 ^{
                01=item = CreateQuestItem('RNDbomb_3', tempActCodeData);
                02=CoordX(item, CoordX(target));
                03=CoordY(item, CoordY(target));
                04=UselessItemData(item, 2, -4);
                05=UselessItemData(item, 3, Id(cur_star) - 1);
                06=CreateActCodeEvent(t_OnItemDestroy, item, target, missile, cur_star, 0);
                08=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                09=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                10=StopMovingItem(cur_star, item);
            }
            12=else if(acryn_name == 'ExpPhysGun_PhysGunMissileFuelTank')
            13 ^{
                01=if(tempActCodeData2)
                02 ^{
                    01=if(IsScriptActive('Mod_ExpArts'))
                    02 ^{
                        01=item = CreateQuestItem('RNDbomb_1', tempActCodeData);
                        02=CoordX(item, CoordX(target));
                        03=CoordY(item, CoordY(target));
                        04=UselessItemData(item, 2, -4);
                        05=UselessItemData(item, 3, Id(cur_star) - 1);
                        06=CreateActCodeEvent(t_OnItemHit, item, target, missile, cur_star, tempActCodeData2);
                        07=cur_star = StarNearbyStars(ShipStar(Player()), 1);
                        08=DropItemInSystem(cur_star, item, CoordX(0), CoordY(0), CoordX(0), CoordY(0));
                        09=StopMovingItem(cur_star, item);
                    }
                    03=else
                    04 ^{
                        01=item = CreateEquipment(t_Cistern, MissileMaxDamage(missile), tempActCodeData2, tempActCodeData);
                        02=DropItemInSystem(cur_star, item, CoordX(target), CoordY(target), CoordX(target), CoordY(target));
                        03=StopMovingItem(cur_star, item);
                        04=FireWeapon(Player(), item, 0);
                    }
                }
            }
            14=else if(~findsubstr(acryn_name, 'Asteroid'))
            15 ^{
                01=if(ShipInNormalSpace(Player()))
                02 ^{
                    01=size_minerals = round(0.90 * GetEquipmentStats(physGun, 0) / 1.5);
                    02=if(size_minerals)
                    03 ^{
                        01=minerals_dropped = 0;
                        02=while(size_minerals)
                        03 ^{
                            01=part_size = 0;
                            02=if(size_minerals < 10 || minerals_dropped >= 3) part_size = size_minerals;
                            03=else part_size = round((0.2 * (0.1 * Rnd(0, 10)) + 0.55) * size_minerals);
                            04=size_minerals = size_minerals - part_size;
                            05=minerals_dropped = minerals_dropped = 1;
                            06=minerals = CreateGoods(t_Minerals, part_size, 1);
                            07=angle = 0.01 * Rnd(0, 200) * pi;
                            08=rad = Rnd(50, 150);
                            09=DropItemInSystem(cur_star, minerals, CoordX(target), CoordY(target), round(cos(angle) * rad) + CoordX(target), round(sin(angle) * rad) + CoordY(target));
                        }
                    }
                }
            }
        }
    }
    PhysGunActCodeQuest ^{
        01=dword physGun = CurItem();
        02=if(!ItemIsInUse(physGun)) exit;
        03=if(ScriptItemActionType(t_OnMissileShot))
        04 ^{
            01=dword missile = ScriptItemActObject1();
            02=if(CustomMissileType(missile) != 'PhysGun') exit;
            03=float angle = Angle(WeaponTarget(physGun), missile);
            04=MissileAngle(missile, angle);
            05=MissileLive(missile, 200);
            06=MissileSpeed(missile, 5000);
            07=if(ObjectType(WeaponTarget(physGun)) == 5)
            08 ^{
                01=if(ShipType(WeaponTarget(physGun)) != 'KillerAsteroid') MissileTarget(missile, 0);
            }
            09=else MissileTarget(missile, 0);
            10=SpecialToEquipment(FindBonusByNameInCfg('ExpPhysGun_PhysGunEmpty'), physGun);
            11=WeaponAmmunition(physGun, 0);
            12=ItemSize(physGun, ItemSize(physGun) - tempActCodeData3);
            13=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeEmpty'));
            14=ItemDurability(physGun, ItemDurability(physGun) - 21);
        }
        05=else if(ScriptItemActionType(t_OnMissileShot2))
        06 ^{
            01=missile = ScriptItemActObject2();
            02=if(CustomMissileType(missile) != 'PhysGun') exit;
            03=dword target = ScriptItemActObject1();
            04=ScriptItemData(physGun, 1, ScriptItemData(physGun, 1) + 1);
            05=int size_minerals = round(0.90 * GetEquipmentStats(physGun, 0) / 1.5);
            06=if(size_minerals)
            07 ^{
                01=int minerals_dropped = 0;
                02=while(size_minerals)
                03 ^{
                    01=int part_size = 0;
                    02=if(size_minerals < 10 || minerals_dropped >= 3) part_size = size_minerals;
                    03=else part_size = round((0.2 * (0.1 * Rnd(0, 10)) + 0.55) * size_minerals);
                    04=size_minerals = size_minerals - part_size;
                    05=minerals_dropped = minerals_dropped = 1;
                    06=dword minerals = CreateGoods(t_Minerals, part_size, 1);
                    07=angle = 0.01 * Rnd(0, 200) * pi;
                    08=int rad = Rnd(50, 150);
                    09=DropItemInSystem(MissileStar(missile), minerals, CoordX(target), CoordY(target), round(cos(angle) * rad) + CoordX(target), round(sin(angle) * rad) + CoordY(target));
                }
            }
        }
    }
}
UseCodeBlocksList ^{
    PhysGunUseCodeEmpty ^{
        01=dword physGun = CurItem();
        02=if(!ItemInScript(physGun)==1) exit;
        03=if(ItemIsBroken(physGun)) exit;
        04=if(!ShipInNormalSpace(Player()))
        05 ^{
            01=MessageBox(CT('FormShip.UseOnlyInSpace'));
            02=exit;
        }
        06=if(!WeaponAmmunition(physGun))
        07 ^{
            01=dword dwd1 = 0;
            02=dword closest_asteroid = 0;
            03=int closest_dist = 500000;
            04=for(int i = 0; i < StarAsteroids(ShipStar(Player())); i = i + 1)
            05 ^{
                01=dwd1 = StarAsteroids(ShipStar(Player()), i);
                02=if(Dist(Player(), dwd1) <= 200)
                03 ^{
                    01=if(Dist(Player(), dwd1) < closest_dist)
                    02 ^{
                        01=closest_asteroid = dwd1;
                        02=closest_dist = Dist(Player(), dwd1);
                    }
                }
            }
            06=if(!closest_asteroid)
            07 ^{
                01=MessageBox('В радиусе <color=0,50,200>200</color> ед. вокруг корабля астероидов не обнаружено');
                02=exit;
            }
            07=int ast_size = round(1.5 * AsteroidMinerals(closest_asteroid));
            08=WeaponAmmunition(physGun, 1);
            09=SetEquipmentStats(physGun, ast_size - 1, 1);
            10=SetEquipmentStats(physGun, ast_size, 0);
            11=ItemSize(physGun, ItemSize(physGun) + ast_size);
            12=tempActCodeData3 = ast_size;
            13=SpecialToEquipment(FindBonusByNameInCfg(CT('Script.Mod_ExpPhysGun.AsteroidToMissileList.' + Format(AsteroidGraph(closest_asteroid), 'Asteroid.', '', '') + '.AcrynNumInCfg')), physGun);
            14=AsteroidRespawn(closest_asteroid);
            15=dwd1 = GetCustomWeaponInfo('PhysGun');
            16=SetCustomWeaponShotData(dwd1, 'Rocket', 5000, 800, 0);
            17=SetCustomWeaponDamageData(dwd1, 1, 1, 2+2048+1048576);
            18=ItemDurability(physGun, ItemDurability(physGun) - Rnd(2, 5));
            19=if(!ItemDurability(physGun)) ItemDurability(physGun, 0);
            20=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeLoaded'));
            21=MessageBox('Ближайший астероид успешно захвачен физганом');
        }
        08=else MessageBox('Физган уже заряжен');
    }
    PhysGunUseCodeLoaded ^{
        01=if(MessageBoxYesNo('Вы уверены, что хотите разрядить физган?'))
        02 ^{
            01=dword physGun = CurItem();
            02=SpecialToEquipment(FindBonusByNameInCfg('ExpPhysGun_PhysGunEmpty'), physGun);
            03=WeaponAmmunition(physGun, 0);
            04=ItemSize(physGun, ItemSize(physGun) - tempActCodeData3);
            05=ItemOnUseCode(physGun, GenerateCodeStringFromBlock('UseCodeBlocksList.PhysGunUseCodeEmpty'));
            06=str acryn_name = BonusNumInCfg(EqSpecial(physGun));
            07=if(findsubstr(acryn_name, 'Asteroid') == -1)
            08 ^{
                01=AddItemToShip(Player(), GetItemFromVault('PhysGunChamber'));
            }
        }
    }
}
ShipInfo ^{
    AddInfo ^{
        CustomInfos ^{
            ExpPhysGun_ImmortalAsteroid ^{
                Description=Инфошка для блокирования урона астероидом (будет получать урон только от физгана и других случайных астероидов)
                Icon=0
                Name=
                OnActCode ^{
                    01=if(ScriptItemActionType(t_OnTakingDamage))
                    02 ^{
                        01=if(ObjectType(ScriptItemActObject1()) == 8) ScriptItemActParam(round(0.10 * ItemSize(ShipItems(ship, 0))));
                        02=else ScriptItemActParam(0);
                    }
                    03=else if(ScriptItemActionType(t_OnTakingDamageSp))
                    04 ^{
                        01=dword missile = ScriptItemActObject1();
                        02=if(ObjectType(missile) == 7)
                        03 ^{
                            01=if(CustomMissileType(missile) == 'PhysGun')
                            02 ^{
                                01=dword ship = ScriptItemActShip();
                                02=int damage = round(0.01 * Rnd(34, 41) * ItemSize(ShipItems(ship, 0)));
                                03=ScriptItemActParam(damage);
                                04=if(Hitpoints(ship) <= damage)
                                05 ^{
                                    01=dword attack_ship = MissileOwner(missile);
                                    02=if(ShipStar(Player()) == ShipStar(attack_ship) && ShipInNormalSpace(attack_ship))
                                    03 ^{
                                        01=ShowEffect('Weapon.MissileHit', 2, attack_ship, attack_ship, round(0.40 * HullHP(attack_ship)), 0, 0, 255, 255, 255);
                                        02=int rand = Rnd(3, 5);
                                        03=for(int i = 1; i <= 5; i = i + 1) FilmSound('Sound.expl' + rand, ship);
                                    }
                                }
                                06=else
                                07 ^{
                                    01=attack_ship = MissileOwner(missile);
                                    02=if(ShipStar(Player()) == ShipStar(attack_ship) && ShipInNormalSpace(attack_ship))
                                    03 ^{
                                        01=rand = Rnd(3, 5);
                                        02=for(i = 1; i <= 2; i = i + 1) FilmSound('Sound.expl' + rand, ship);
                                    }
                                }
                            }
                            03=else ScriptItemActParam(0);
                        }
                        04=else ScriptItemActParam(0);
                    }
                    05=else ScriptItemActParam(0);
                }
                OnActCodeTypes=t_OnTakingDamage,t_OnTakingDamageEn,t_OnTakingDamageSp,t_OnTakingDamageMi
            }
        }
    }
}
ShipType ^{
    TypeName ^{
        KillerAsteroid=Астероид
    }
}
UselessItems ^{
    BrokenPhysGun ^{
        Cost=Small
        Name=Сломанный физган
        Owner=Any
        Size=30
        Text=Раньше этой штукой можно было перенаправлять астероиды, а теперь это просто куча бесполезного металлолома. Металлолома, который чуть не оторвал кусок вашего корабля при взрыве. Высказали бы вы этим инженерам пару ласковых...
        Text=<color=254,0,0>(ремонту не подлежит)<color>
    }
}
